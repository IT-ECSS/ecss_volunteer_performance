<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/en.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ECSS Performance Night</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
    <script>
      window.OneSignalDeferred = window.OneSignalDeferred || [];
      OneSignalDeferred.push(async function(OneSignal) {
        await OneSignal.init({
          appId: "62117916-bc7c-4424-a12a-f6e54aa06cc5",
          notifyButton: {
            enable: true,  // Shows the bell icon
          },
          promptOptions: {
            slidedown: {
              prompts: [
                { type: "push", autoPrompt: true }
              ]
            }
          }
        });

        if (window.OneSignal) {
          window.OneSignal.push(() => {
            window.OneSignal.on('notificationDisplay', (event) => {
              console.log('OneSignal notification event:', event);
              // Dispatch a custom event for React to listen to
              window.dispatchEvent(new CustomEvent('onesignal-notification', {
                detail: {
                  type: 'info',
                  message: event.heading ? `${event.heading}: ${event.content}` : event.content || JSON.stringify(event)
                }
              }));
            });
          });
        }
      });
    </script>
  </body>
</html>
